{% extends "base.html" %}
{% load crispy_forms_tags %}

{% block content %}
<h1 class="mb-4">Productos</h1>


<form method="get" class="form-inline mb-3">

    <input type="text"
           name="nombre"
           value="{{ request.GET.nombre }}"
           placeholder="Buscar por nombre"
           class="form-control mr-2">

    <label class="mr-2">
        <input type="checkbox"
               name="stock_bajo"
               value="1"
               {% if request.GET.stock_bajo == "1" %}checked{% endif %}>
        Stock bajo
    </label>

    <button class="btn btn-primary">Filtrar</button>
</form>


<a href="{% url 'productos:crear' %}" class="btn btn-success mb-3">
    <i class="fas fa-plus"></i> Nuevo Producto
</a>


<table class="table table-striped table-bordered">
    <thead>
        <tr>
            <th>Nombre</th>
            <th>SKU</th>
            <th>Precio</th>
            <th>Stock</th>
            <th>Acciones</th>
        </tr>
    </thead>

    <tbody>
        {% for producto in productos %}
        <tr>
            <td>{{ producto.nombre }}</td>
            <td>{{ producto.sku }}</td>
            <td>${{ producto.precio }}</td>
            <td>{{ producto.stock }}</td>
        <td>
            <!-- VER -->
            <a class="btn btn-info btn-sm"
            href="{% url 'productos:detalle' producto.pk %}">
                <i class="fas fa-eye"></i> Ver
            </a>

            <!-- EDITAR -->
            <a class="btn btn-warning btn-sm"
            href="{% url 'productos:editar' producto.pk %}">
                <i class="fas fa-edit"></i> Editar
            </a>

            <!-- ELIMINAR -->
            <a class="btn btn-danger btn-sm"
            href="{% url 'productos:eliminar' producto.pk %}">
                <i class="fas fa-trash"></i> Eliminar
            </a>
        </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="5" class="text-center">No hay productos cargados.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>


{% include "pagination.html" with page_obj=productos %}

{% endblock %}
